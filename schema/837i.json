{
  "schema_version": "2.0",
  "transaction": {
    "id": "837I",
    "version": "005010X223A2",
    "type": "837",
    "description": "Health Care Claim: Institutional"
  },
  "transaction_header": {
    "segments": [
      {
        "id": "ISA",
        "elements": [
          { "pos": 0, "path": "interchange.auth_info_qualifier", "expect": "00" },
          { "pos": 1, "path": "interchange.auth_info", "transform": ["trim"] },
          { "pos": 2, "path": "interchange.security_qualifier", "expect": "00" },
          { "pos": 3, "path": "interchange.security_info", "transform": ["trim"] },
          { "pos": 4, "path": "interchange.sender_id_qualifier", "map": { "ZZ": "mutually_defined" } },
          { "pos": 5, "path": "interchange.sender_id", "transform": ["trim"] },
          { "pos": 6, "path": "interchange.receiver_id_qualifier", "map": { "ZZ": "mutually_defined" } },
          { "pos": 7, "path": "interchange.receiver_id", "transform": ["trim"] },
          { "pos": 8, "path": "interchange.date" },
          { "pos": 9, "path": "interchange.time" },
          { "pos": 10, "path": "interchange.repetition_separator" },
          { "pos": 11, "path": "interchange.version_number", "expect": "00501" },
          { "pos": 12, "path": "interchange.control_number" },
          { "pos": 13, "path": "interchange.ack_requested" },
          { "pos": 14, "path": "interchange.usage_indicator", "map": { "P": "production", "T": "test" } }
        ]
      },
      {
        "id": "GS",
        "elements": [
          { "pos": 0, "path": "functional_group.functional_id_code", "expect": "HC" },
          { "pos": 1, "path": "functional_group.sender_code" },
          { "pos": 2, "path": "functional_group.receiver_code" },
          { "pos": 3, "path": "functional_group.date" },
          { "pos": 4, "path": "functional_group.time" },
          { "pos": 5, "path": "functional_group.control_number" },
          { "pos": 6, "path": "functional_group.responsible_agency_code", "expect": "X" },
          { "pos": 7, "path": "functional_group.version", "expect": "005010X223A2" }
        ]
      },
      {
        "id": "ST",
        "elements": [
          { "pos": 0, "path": "transaction_set.id", "expect": "837" },
          { "pos": 1, "path": "transaction_set.control_number" },
          { "pos": 2, "path": "transaction_set.implementation_convention_reference" }
        ]
      },
      {
        "id": "BHT",
        "elements": [
          { "pos": 0, "path": "beginning_of_hierarchical_transaction.hierarchy_code", "expect": "0019" },
          { "pos": 1, "path": "beginning_of_hierarchical_transaction.transaction_type_code",
            "map": { "00": "original", "18": "reissue", "19": "information_copy" } },
          { "pos": 2, "path": "beginning_of_hierarchical_transaction.reference_id" },
          { "pos": 3, "path": "beginning_of_hierarchical_transaction.date" },
          { "pos": 4, "path": "beginning_of_hierarchical_transaction.time" },
          { "pos": 5, "path": "beginning_of_hierarchical_transaction.claim_type",
            "map": { "31": "subrogation_demand", "CH": "chargeable", "RP": "reporting" } }
        ]
      }
    ]
  },
  "transaction_trailer": {
    "segments": [
      {
        "id": "SE",
        "elements": [
          { "pos": 0, "path": "transaction_set_trailer.segment_count" },
          { "pos": 1, "path": "transaction_set_trailer.control_number" }
        ]
      },
      {
        "id": "GE",
        "elements": [
          { "pos": 0, "path": "functional_group_trailer.transaction_set_count" },
          { "pos": 1, "path": "functional_group_trailer.control_number" }
        ]
      },
      {
        "id": "IEA",
        "elements": [
          { "pos": 0, "path": "interchange_trailer.functional_group_count" },
          { "pos": 1, "path": "interchange_trailer.control_number" }
        ]
      }
    ]
  },
  "sequential_sections": [
    {
      "name": "Submitter",
      "output_path": "submitter",
      "trigger": { "segment": "NM1", "qualifier": [0, "41"] },
      "segments": [
        {
          "id": "NM1",
          "elements": [
            { "pos": 0, "path": "entity_type_qualifier", "expect": "41" },
            { "pos": 1, "path": "entity_type", "map": { "1": "person", "2": "organization" } },
            { "pos": 2, "path": "last_name" },
            { "pos": 3, "path": "first_name" },
            { "pos": 7, "path": "id_code_qualifier", "map": { "46": "electronic_transmitter_id" } },
            { "pos": 8, "path": "id" }
          ]
        },
        {
          "id": "PER",
          "multiple": true,
          "output_array": "contacts",
          "elements": [
            { "pos": 0, "path": "contact_function_code", "map": { "IC": "information_contact" } },
            { "pos": 1, "path": "name" },
            { "pos": 2, "path": "comm_number_qualifier", "map": { "TE": "telephone", "EM": "email", "FX": "fax" } },
            { "pos": 3, "path": "comm_number" }
          ]
        }
      ]
    },
    {
      "name": "Receiver",
      "output_path": "receiver",
      "trigger": { "segment": "NM1", "qualifier": [0, "40"] },
      "segments": [
        {
          "id": "NM1",
          "elements": [
            { "pos": 0, "path": "entity_type_qualifier", "expect": "40" },
            { "pos": 1, "path": "entity_type", "map": { "2": "organization" } },
            { "pos": 2, "path": "name" },
            { "pos": 7, "path": "id_code_qualifier", "map": { "46": "electronic_transmitter_id" } },
            { "pos": 8, "path": "id" }
          ]
        }
      ]
    }
  ],
  "hierarchical_structure": {
    "output_array": "billing_providers",
    "levels": {
      "20": {
        "name": "Billing Provider",
        "segments": [
          {
            "id": "HL",
            "elements": [
              { "pos": 0, "path": "hierarchical_id" },
              { "pos": 1, "path": "hierarchical_parent_id" },
              { "pos": 2, "path": "hierarchical_level_code", "expect": "20" },
              { "pos": 3, "path": "hierarchical_child_code" }
            ]
          },
          {
            "id": "PRV",
            "optional": true,
            "elements": [
              { "pos": 0, "path": "provider_code", "map": { "BI": "billing", "PT": "pay_to" } },
              { "pos": 1, "path": "reference_id_qualifier", "map": { "PXC": "health_care_provider_taxonomy_code" } },
              { "pos": 2, "path": "provider_taxonomy_code" }
            ]
          },
          {
            "id": "NM1",
            "qualifier": [0, "85"],
            "group": ["NM1", "N3", "N4", "REF"],
            "elements": [
              { "seg": "NM1", "pos": 0, "path": "entity_type_qualifier", "expect": "85" },
              { "seg": "NM1", "pos": 1, "path": "entity_type", "map": { "1": "person", "2": "organization" } },
              { "seg": "NM1", "pos": 2, "path": "last_name" },
              { "seg": "NM1", "pos": 3, "path": "first_name" },
              { "seg": "NM1", "pos": 4, "path": "middle_name" },
              { "seg": "NM1", "pos": 5, "path": "name_prefix" },
              { "seg": "NM1", "pos": 7, "path": "id_code_qualifier", "map": { "XX": "npi", "FI": "federal_tax_id" } },
              { "seg": "NM1", "pos": 8, "path": "id" },
              { "seg": "N3", "pos": 0, "path": "address1" },
              { "seg": "N3", "pos": 1, "path": "address2" },
              { "seg": "N4", "pos": 0, "path": "city" },
              { "seg": "N4", "pos": 1, "path": "state" },
              { "seg": "N4", "pos": 2, "path": "zip" },
              { "seg": "N4", "pos": 3, "path": "country_code" },
              { "seg": "REF", "pos": 0, "path": "reference_code", "map": { "EI": "employer_id", "SY": "ssn", "TJ": "federal_tax_id" } },
              { "seg": "REF", "pos": 1, "path": "tax_id" }
            ]
          }
        ],
        "child_levels": ["22"]
      },
      "22": {
        "name": "Subscriber",
        "output_array": "subscribers",
        "segments": [
          {
            "id": "HL",
            "elements": [
              { "pos": 0, "path": "hierarchical_id" },
              { "pos": 1, "path": "hierarchical_parent_id" },
              { "pos": 2, "path": "hierarchical_level_code", "expect": "22" },
              { "pos": 3, "path": "hierarchical_child_code" }
            ]
          },
          {
            "id": "SBR",
            "elements": [
              { "pos": 0, "path": "payer_responsibility", "map": { "P": "primary", "S": "secondary", "T": "tertiary" } },
              { "pos": 1, "path": "individual_relationship", "map": { "01": "spouse", "18": "self", "19": "child", "20": "employee" } },
              { "pos": 2, "path": "reference_identification" },
              { "pos": 3, "path": "policy_name" },
              { "pos": 8, "path": "insurance_type", "map": {
                "12": "ppo", "13": "hmo", "14": "epo", "15": "indemnity",
                "16": "hmo_medicare_risk", "AM": "automobile_medical",
                "AP": "auto_personal_injury", "BL": "blue_cross_blue_shield",
                "CH": "champus", "CI": "commercial_insurance", "DS": "disability",
                "HM": "health_maintenance_organization", "LM": "liability_medical",
                "MA": "medicare_part_a", "MB": "medicare_part_b", "MC": "medicaid",
                "OF": "other_federal_program", "TV": "title_v", "VA": "veterans_affairs",
                "WC": "workers_comp", "ZZ": "mutually_defined"
              } }
            ]
          },
          {
            "id": "NM1",
            "qualifier": [0, "IL"],
            "group": ["NM1", "N3", "N4", "DMG"],
            "elements": [
              { "seg": "NM1", "pos": 0, "path": "entity_type_qualifier", "expect": "IL" },
              { "seg": "NM1", "pos": 1, "path": "entity_type", "map": { "1": "person", "2": "organization" } },
              { "seg": "NM1", "pos": 2, "path": "last_name" },
              { "seg": "NM1", "pos": 3, "path": "first_name" },
              { "seg": "NM1", "pos": 4, "path": "middle_name" },
              { "seg": "NM1", "pos": 7, "path": "id_code_qualifier", "map": { "MI": "member_id" } },
              { "seg": "NM1", "pos": 8, "path": "id" },
              { "seg": "N3", "pos": 0, "path": "address1" },
              { "seg": "N3", "pos": 1, "path": "address2" },
              { "seg": "N4", "pos": 0, "path": "city" },
              { "seg": "N4", "pos": 1, "path": "state" },
              { "seg": "N4", "pos": 2, "path": "zip" },
              { "seg": "DMG", "pos": 1, "path": "birth_date" },
              { "seg": "DMG", "pos": 2, "path": "gender", "map": { "F": "female", "M": "male", "U": "unknown" } }
            ]
          },
          {
            "id": "NM1",
            "qualifier": [0, "PR"],
            "group": ["NM1", "N3", "N4"],
            "output_prefix": "payer",
            "elements": [
              { "seg": "NM1", "pos": 0, "path": "entity_type_qualifier", "expect": "PR" },
              { "seg": "NM1", "pos": 1, "path": "entity_type", "expect": "2" },
              { "seg": "NM1", "pos": 2, "path": "name" },
              { "seg": "NM1", "pos": 7, "path": "id_code_qualifier", "map": { "PI": "payer_id", "XV": "health_care_financing_administration" } },
              { "seg": "NM1", "pos": 8, "path": "id" },
              { "seg": "N3", "pos": 0, "path": "address1" },
              { "seg": "N3", "pos": 1, "path": "address2" },
              { "seg": "N4", "pos": 0, "path": "city" },
              { "seg": "N4", "pos": 1, "path": "state" },
              { "seg": "N4", "pos": 2, "path": "zip" }
            ]
          }
        ],
        "child_levels": ["23"]
      },
      "23": {
        "name": "Patient",
        "output_array": "patients",
        "segments": [
          {
            "id": "HL",
            "elements": [
              { "pos": 0, "path": "hierarchical_id" },
              { "pos": 1, "path": "hierarchical_parent_id" },
              { "pos": 2, "path": "hierarchical_level_code", "expect": "23" }
            ]
          },
          {
            "id": "PAT",
            "optional": true,
            "elements": [
              { "pos": 0, "path": "relationship_code", "map": {
                "01": "spouse",
                "19": "child",
                "20": "employee",
                "21": "unknown",
                "39": "organ_donor",
                "40": "cadaver_donor",
                "53": "life_partner",
                "G8": "other_relationship"
              } }
            ]
          },
          {
            "id": "NM1",
            "qualifier": [0, "QC"],
            "group": ["NM1", "N3", "N4", "DMG"],
            "elements": [
              { "seg": "NM1", "pos": 0, "path": "entity_type_qualifier", "expect": "QC" },
              { "seg": "NM1", "pos": 1, "path": "entity_type", "expect": "1" },
              { "seg": "NM1", "pos": 2, "path": "last_name" },
              { "seg": "NM1", "pos": 3, "path": "first_name" },
              { "seg": "NM1", "pos": 4, "path": "middle_name" },
              { "seg": "NM1", "pos": 5, "path": "name_prefix" },
              { "seg": "NM1", "pos": 7, "path": "id_code_qualifier" },
              { "seg": "NM1", "pos": 8, "path": "id" },
              { "seg": "N3", "pos": 0, "path": "address1" },
              { "seg": "N3", "pos": 1, "path": "address2" },
              { "seg": "N4", "pos": 0, "path": "city" },
              { "seg": "N4", "pos": 1, "path": "state" },
              { "seg": "N4", "pos": 2, "path": "zip" },
              { "seg": "DMG", "pos": 1, "path": "birth_date" },
              { "seg": "DMG", "pos": 2, "path": "gender", "map": { "F": "female", "M": "male", "U": "unknown" } }
            ]
          }
        ],
        "child_levels": [],
        "non_hierarchical_loops": [
          {
            "name": "Claims",
            "trigger": "CLM",
            "output_array": "claims",
            "segments": [
              {
                "id": "CLM",
                "elements": [
                  { "pos": 0, "path": "claim_id" },
                  { "pos": 1, "path": "total_charges" },
                  { "pos": 2, "path": "amount_paid" },
                  { "pos": 3, "path": "patient_control_number" },
                  { "pos": 4, "path": "type_of_bill", "composite": [1] },
                  { "pos": 5, "path": "frequency_code", "map": {
                    "1": "admit_through_discharge",
                    "2": "interim_first_claim",
                    "3": "interim_continuing_claim",
                    "4": "interim_last_claim",
                    "7": "replacement",
                    "8": "void"
                  } },
                  { "pos": 6, "path": "signature_indicator" },
                  { "pos": 7, "path": "assignment_indicator" },
                  { "pos": 8, "path": "benefits_assignment" },
                  { "pos": 9, "path": "release_info" },
                  { "pos": 10, "path": "delay_reason", "map": {
                    "1": "proof_of_eligibility_unavailable",
                    "2": "litigation",
                    "3": "authorization_delays",
                    "4": "delay_in_certifying_provider",
                    "5": "delay_in_supplying_billing_forms",
                    "6": "delay_in_delivery_of_custom_supplies",
                    "7": "third_party_processing_delay",
                    "8": "delay_in_eligibility_determination",
                    "9": "original_claim_rejected",
                    "10": "administration_delay",
                    "11": "other"
                  } }
                ]
              },
              {
                "id": "DTP",
                "multiple": true,
                "output_array": "dates",
                "elements": [
                  { "pos": 0, "path": "qualifier", "map": {
                    "434": "statement_dates",
                    "435": "admission_date",
                    "096": "discharge_date",
                    "431": "onset_date"
                  } },
                  { "pos": 1, "path": "format_qualifier", "map": { "D8": "date", "RD8": "date_range" } },
                  { "pos": 2, "path": "date" }
                ]
              },
              {
                "id": "CL1",
                "optional": true,
                "elements": [
                  { "pos": 0, "path": "admission_type", "map": {
                    "1": "emergency",
                    "2": "urgent",
                    "3": "elective",
                    "4": "newborn",
                    "5": "trauma"
                  } },
                  { "pos": 1, "path": "admission_source", "map": {
                    "1": "physician_referral",
                    "2": "clinic_referral",
                    "3": "hmo_referral",
                    "4": "transfer_from_hospital",
                    "5": "transfer_from_snf",
                    "6": "transfer_from_another_facility",
                    "7": "emergency_room",
                    "8": "court_law",
                    "9": "information_not_available"
                  } },
                  { "pos": 2, "path": "patient_status", "map": {
                    "01": "discharge_to_home",
                    "02": "discharge_to_short_term_hospital",
                    "03": "discharge_to_snf",
                    "04": "discharge_to_intermediate_care",
                    "05": "discharge_to_other_facility",
                    "06": "discharge_to_home_health",
                    "07": "left_against_medical_advice",
                    "20": "expired",
                    "30": "still_patient",
                    "40": "expired_at_home",
                    "41": "expired_in_medical_facility",
                    "50": "hospice_home",
                    "51": "hospice_medical_facility"
                  } }
                ]
              },
              {
                "id": "HI",
                "multiple": true,
                "optional": true,
                "repeating_elements": {
                  "all": true,
                  "separator": ":",
                  "patterns": [
                    {
                      "when_qualifier": ["ABK", "ABF", "ABJ", "ABN", "APR"],
                      "output_array": "diagnosis_codes",
                      "fields": [
                        { "component": 0, "name": "qualifier" },
                        { "component": 1, "name": "code" },
                        { "component": 8, "name": "poa" }
                      ]
                    },
                    {
                      "when_qualifier": ["BBR", "BBQ"],
                      "output_array": "procedure_codes",
                      "fields": [
                        { "component": 0, "name": "qualifier" },
                        { "component": 1, "name": "code" },
                        { "component": 2, "name": "date_format" },
                        { "component": 3, "name": "date" }
                      ]
                    },
                    {
                      "when_qualifier": ["DR"],
                      "output_array": "drg_codes",
                      "fields": [
                        { "component": 0, "name": "qualifier" },
                        { "component": 1, "name": "code" }
                      ]
                    },
                    {
                      "when_qualifier": ["BG"],
                      "output_array": "condition_codes",
                      "fields": [
                        { "component": 0, "name": "qualifier" },
                        { "component": 1, "name": "code" }
                      ]
                    },
                    {
                      "when_qualifier": ["BH"],
                      "output_array": "occurrence_codes",
                      "fields": [
                        { "component": 0, "name": "qualifier" },
                        { "component": 1, "name": "code" },
                        { "component": 2, "name": "date_format" },
                        { "component": 3, "name": "date" }
                      ]
                    },
                    {
                      "when_qualifier": ["BI"],
                      "output_array": "occurrence_span_codes",
                      "fields": [
                        { "component": 0, "name": "qualifier" },
                        { "component": 1, "name": "code" },
                        { "component": 2, "name": "date_format" },
                        { "component": 3, "name": "date" }
                      ]
                    },
                    {
                      "when_qualifier": ["BE"],
                      "output_array": "value_codes",
                      "fields": [
                        { "component": 0, "name": "qualifier" },
                        { "component": 1, "name": "code" },
                        { "component": 4, "name": "amount" }
                      ]
                    }
                  ]
                }
              },
              {
                "id": "REF",
                "multiple": true,
                "optional": true,
                "elements": [
                  { "pos": 0, "path": "reference_qualifier", "map": {
                    "EA": "medical_record_id",
                    "D9": "claim_number",
                    "1J": "payer_claim_control_number"
                  } },
                  { "pos": 1, "path": "reference_id" }
                ]
              }
            ],
            "nested_loops": [
              {
                "name": "Service Lines",
                "trigger": "LX",
                "output_array": "service_lines",
                "segments": [
                  {
                    "id": "LX",
                    "elements": [
                      { "pos": 0, "path": "line_number" }
                    ]
                  },
                  {
                    "id": "SV2",
                    "elements": [
                      { "pos": 0, "path": "revenue_code" },
                      { "pos": 1, "path": "procedure_code", "composite": [1] },
                      { "pos": 1, "path": "modifier_1", "composite": [2] },
                      { "pos": 1, "path": "modifier_2", "composite": [3] },
                      { "pos": 1, "path": "modifier_3", "composite": [4] },
                      { "pos": 1, "path": "modifier_4", "composite": [5] },
                      { "pos": 1, "path": "short_description", "composite": [6] },
                      { "pos": 2, "path": "amount" },
                      { "pos": 3, "path": "unit_code" },
                      { "pos": 4, "path": "quantity" },
                      { "pos": 6, "path": "non_covered_charge" }
                    ]
                  },
                  {
                    "id": "DTP",
                    "optional": true,
                    "elements": [
                      { "pos": 0, "path": "date_qualifier", "map": { "472": "service_date" } },
                      { "pos": 1, "path": "date_format_qualifier", "map": { "D8": "date", "RD8": "date_range" } },
                      { "pos": 2, "path": "service_date" }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    }
  }
}
