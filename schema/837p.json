{
  "schema_version": "2.0",
  "transaction": {
    "id": "837P",
    "version": "005010X222A1",
    "type": "837",
    "description": "Health Care Claim: Professional"
  },
  "transaction_header": {
    "segments": [
      {
        "id": "ISA",
        "elements": [
          { "pos": 0, "path": "interchange.auth_info_qualifier", "expect": "00" },
          { "pos": 1, "path": "interchange.auth_info", "transform": ["trim"] },
          { "pos": 2, "path": "interchange.security_qualifier", "expect": "00" },
          { "pos": 3, "path": "interchange.security_info", "transform": ["trim"] },
          { "pos": 4, "path": "interchange.sender_id_qualifier", "map": { "ZZ": "mutually_defined" } },
          { "pos": 5, "path": "interchange.sender_id", "transform": ["trim"] },
          { "pos": 6, "path": "interchange.receiver_id_qualifier", "map": { "ZZ": "mutually_defined" } },
          { "pos": 7, "path": "interchange.receiver_id", "transform": ["trim"] },
          { "pos": 8, "path": "interchange.date" },
          { "pos": 9, "path": "interchange.time" },
          { "pos": 10, "path": "interchange.repetition_separator" },
          { "pos": 11, "path": "interchange.version_number", "expect": "00501" },
          { "pos": 12, "path": "interchange.control_number" },
          { "pos": 13, "path": "interchange.ack_requested" },
          { "pos": 14, "path": "interchange.usage_indicator", "map": { "P": "production", "T": "test" } }
        ]
      },
      {
        "id": "GS",
        "elements": [
          { "pos": 0, "path": "functional_group.functional_id_code", "expect": "HC" },
          { "pos": 1, "path": "functional_group.sender_code" },
          { "pos": 2, "path": "functional_group.receiver_code" },
          { "pos": 3, "path": "functional_group.date" },
          { "pos": 4, "path": "functional_group.time" },
          { "pos": 5, "path": "functional_group.control_number" },
          { "pos": 6, "path": "functional_group.responsible_agency_code", "expect": "X" },
          { "pos": 7, "path": "functional_group.version", "expect": "005010X222A1" }
        ]
      },
      {
        "id": "ST",
        "elements": [
          { "pos": 0, "path": "transaction_set.id", "expect": "837" },
          { "pos": 1, "path": "transaction_set.control_number" },
          { "pos": 2, "path": "transaction_set.implementation_convention_reference" }
        ]
      },
      {
        "id": "BHT",
        "elements": [
          { "pos": 0, "path": "beginning_of_hierarchical_transaction.hierarchy_code", "expect": "0019" },
          { "pos": 1, "path": "beginning_of_hierarchical_transaction.transaction_type_code",
            "map": { "00": "original", "18": "reissue", "19": "information_copy" } },
          { "pos": 2, "path": "beginning_of_hierarchical_transaction.reference_id" },
          { "pos": 3, "path": "beginning_of_hierarchical_transaction.date" },
          { "pos": 4, "path": "beginning_of_hierarchical_transaction.time" },
          { "pos": 5, "path": "beginning_of_hierarchical_transaction.claim_type",
            "map": { "31": "subrogation_demand", "CH": "chargeable", "RP": "reporting" } }
        ]
      }
    ]
  },
  "transaction_trailer": {
    "segments": [
      {
        "id": "SE",
        "elements": [
          { "pos": 0, "path": "transaction_set_trailer.segment_count" },
          { "pos": 1, "path": "transaction_set_trailer.control_number" }
        ]
      },
      {
        "id": "GE",
        "elements": [
          { "pos": 0, "path": "functional_group_trailer.transaction_set_count" },
          { "pos": 1, "path": "functional_group_trailer.control_number" }
        ]
      },
      {
        "id": "IEA",
        "elements": [
          { "pos": 0, "path": "interchange_trailer.functional_group_count" },
          { "pos": 1, "path": "interchange_trailer.control_number" }
        ]
      }
    ]
  },
  "sequential_sections": [
    {
      "name": "Submitter",
      "output_path": "submitter",
      "trigger": { "segment": "NM1", "qualifier": [0, "41"] },
      "segments": [
        {
          "id": "NM1",
          "elements": [
            { "pos": 0, "path": "entity_type_qualifier", "expect": "41" },
            { "pos": 1, "path": "entity_type", "map": { "1": "person", "2": "organization" } },
            { "pos": 2, "path": "last_name" },
            { "pos": 3, "path": "first_name" },
            { "pos": 7, "path": "id_code_qualifier", "map": { "46": "electronic_transmitter_id" } },
            { "pos": 8, "path": "id" }
          ]
        },
        {
          "id": "PER",
          "multiple": true,
          "output_array": "contacts",
          "elements": [
            { "pos": 0, "path": "contact_function_code", "map": { "IC": "information_contact" } },
            { "pos": 1, "path": "name" },
            { "pos": 2, "path": "comm_number_qualifier", "map": { "TE": "telephone", "EM": "email", "FX": "fax" } },
            { "pos": 3, "path": "comm_number" }
          ]
        }
      ]
    },
    {
      "name": "Receiver",
      "output_path": "receiver",
      "trigger": { "segment": "NM1", "qualifier": [0, "40"] },
      "segments": [
        {
          "id": "NM1",
          "elements": [
            { "pos": 0, "path": "entity_type_qualifier", "expect": "40" },
            { "pos": 1, "path": "entity_type", "map": { "2": "organization" } },
            { "pos": 2, "path": "name" },
            { "pos": 7, "path": "id_code_qualifier", "map": { "46": "electronic_transmitter_id" } },
            { "pos": 8, "path": "id" }
          ]
        }
      ]
    }
  ],
  "hierarchical_structure": {
    "output_array": "billing_providers",
    "levels": {
      "20": {
        "name": "Billing Provider",
        "segments": [
          {
            "id": "HL",
            "elements": [
              { "pos": 0, "path": "hierarchical_id" },
              { "pos": 1, "path": "hierarchical_parent_id" },
              { "pos": 2, "path": "hierarchical_level_code", "expect": "20" },
              { "pos": 3, "path": "hierarchical_child_code" }
            ]
          },
          {
            "id": "PRV",
            "optional": true,
            "elements": [
              { "pos": 0, "path": "provider_code", "map": { "BI": "billing", "PT": "pay_to" } },
              { "pos": 1, "path": "reference_id_qualifier", "map": { "PXC": "health_care_provider_taxonomy_code" } },
              { "pos": 2, "path": "provider_taxonomy_code" }
            ]
          },
          {
            "id": "NM1",
            "qualifier": [0, "85"],
            "group": ["NM1", "N3", "N4", "REF", "PER"],
            "elements": [
              { "seg": "NM1", "pos": 0, "path": "entity_type_qualifier", "expect": "85" },
              { "seg": "NM1", "pos": 1, "path": "entity_type", "map": { "1": "person", "2": "organization" } },
              { "seg": "NM1", "pos": 2, "path": "last_name" },
              { "seg": "NM1", "pos": 3, "path": "first_name" },
              { "seg": "NM1", "pos": 4, "path": "middle_name" },
              { "seg": "NM1", "pos": 5, "path": "name_prefix" },
              { "seg": "NM1", "pos": 7, "path": "id_code_qualifier", "map": { "XX": "npi", "FI": "federal_tax_id" } },
              { "seg": "NM1", "pos": 8, "path": "id" },
              { "seg": "N3", "pos": 0, "path": "address1" },
              { "seg": "N3", "pos": 1, "path": "address2" },
              { "seg": "N4", "pos": 0, "path": "city" },
              { "seg": "N4", "pos": 1, "path": "state" },
              { "seg": "N4", "pos": 2, "path": "zip" },
              { "seg": "N4", "pos": 3, "path": "country_code" },
              { "seg": "REF", "pos": 0, "path": "reference_code", "map": { "EI": "employer_id", "SY": "ssn", "TJ": "federal_tax_id" } },
              { "seg": "REF", "pos": 1, "path": "tax_id" },
              { "seg": "PER", "pos": 1, "path": "contact_name" },
              { "seg": "PER", "pos": 3, "path": "contact_phone" }
            ]
          }
        ],
        "child_levels": ["22"]
      },
      "22": {
        "name": "Subscriber",
        "output_array": "subscribers",
        "segments": [
          {
            "id": "HL",
            "elements": [
              { "pos": 0, "path": "hierarchical_id" },
              { "pos": 1, "path": "hierarchical_parent_id" },
              { "pos": 2, "path": "hierarchical_level_code", "expect": "22" },
              { "pos": 3, "path": "hierarchical_child_code" }
            ]
          },
          {
            "id": "SBR",
            "elements": [
              { "pos": 0, "path": "payer_responsibility", "map": { "P": "primary", "S": "secondary", "T": "tertiary" } },
              { "pos": 1, "path": "individual_relationship", "map": { "01": "spouse", "18": "self", "19": "child", "20": "employee" } },
              { "pos": 2, "path": "reference_identification" },
              { "pos": 3, "path": "policy_name" },
              { "pos": 8, "path": "insurance_type", "map": {
                "12": "ppo", "13": "hmo", "14": "epo", "15": "indemnity",
                "16": "hmo_medicare_risk", "AM": "automobile_medical",
                "AP": "auto_personal_injury", "BL": "blue_cross_blue_shield",
                "CH": "champus", "CI": "commercial_insurance", "DS": "disability",
                "HM": "health_maintenance_organization", "LM": "liability_medical",
                "MA": "medicare_part_a", "MB": "medicare_part_b", "MC": "medicaid",
                "OF": "other_federal_program", "TV": "title_v", "VA": "veterans_affairs",
                "WC": "workers_comp", "ZZ": "mutually_defined"
              } }
            ]
          },
          {
            "id": "NM1",
            "qualifier": [0, "IL"],
            "group": ["NM1", "N3", "N4", "DMG"],
            "elements": [
              { "seg": "NM1", "pos": 0, "path": "entity_type_qualifier", "expect": "IL" },
              { "seg": "NM1", "pos": 1, "path": "entity_type", "map": { "1": "person", "2": "organization" } },
              { "seg": "NM1", "pos": 2, "path": "last_name" },
              { "seg": "NM1", "pos": 3, "path": "first_name" },
              { "seg": "NM1", "pos": 4, "path": "middle_name" },
              { "seg": "NM1", "pos": 7, "path": "id_code_qualifier", "map": { "MI": "member_id" } },
              { "seg": "NM1", "pos": 8, "path": "id" },
              { "seg": "N3", "pos": 0, "path": "address1" },
              { "seg": "N3", "pos": 1, "path": "address2" },
              { "seg": "N4", "pos": 0, "path": "city" },
              { "seg": "N4", "pos": 1, "path": "state" },
              { "seg": "N4", "pos": 2, "path": "zip" },
              { "seg": "DMG", "pos": 1, "path": "birth_date" },
              { "seg": "DMG", "pos": 2, "path": "gender", "map": { "F": "female", "M": "male" } }
            ]
          },
          {
            "id": "NM1",
            "qualifier": [0, "PR"],
            "group": ["NM1", "N3", "N4"],
            "output_prefix": "payer",
            "elements": [
              { "seg": "NM1", "pos": 0, "path": "entity_type_qualifier", "expect": "PR" },
              { "seg": "NM1", "pos": 1, "path": "entity_type", "expect": "2" },
              { "seg": "NM1", "pos": 2, "path": "name" },
              { "seg": "NM1", "pos": 7, "path": "id_code_qualifier", "map": { "PI": "payer_id", "XV": "health_care_financing_administration" } },
              { "seg": "NM1", "pos": 8, "path": "id" },
              { "seg": "N3", "pos": 0, "path": "address1" },
              { "seg": "N3", "pos": 1, "path": "address2" },
              { "seg": "N4", "pos": 0, "path": "city" },
              { "seg": "N4", "pos": 1, "path": "state" },
              { "seg": "N4", "pos": 2, "path": "zip" }
            ]
          }
        ],
        "child_levels": ["23"],
        "non_hierarchical_loops": [
          {
            "name": "Claims",
            "trigger": "CLM",
            "output_array": "claims",
            "segments": [
              {
                "id": "CLM",
                "elements": [
                  { "pos": 0, "path": "claim_id" },
                  { "pos": 1, "path": "total_charges" },
                  { "pos": 4, "path": "facility_code", "composite": [0] },
                  { "pos": 4, "path": "facility_qualifier", "composite": [1] },
                  { "pos": 4, "path": "frequency_code", "composite": [2] },
                  { "pos": 5, "path": "provider_signature_indicator", "map": { "Y": "yes", "N": "no" } },
                  { "pos": 6, "path": "assignment_plan", "map": { "A": "assigned", "B": "assignment_accepted", "C": "not_assigned" } },
                  { "pos": 7, "path": "benefits_assignment", "map": { "Y": "yes", "N": "no" } },
                  { "pos": 8, "path": "release_info", "map": { "Y": "yes", "N": "no" } },
                  { "pos": 9, "path": "patient_signature_source", "map": { "P": "patient_signature_on_file" } }
                ]
              },
              {
                "id": "DTP",
                "multiple": true,
                "output_array": "dates",
                "elements": [
                  { "pos": 0, "path": "qualifier", "map": {
                    "431": "onset_current_illness",
                    "434": "statement_period",
                    "435": "admission_date",
                    "439": "accident_date",
                    "453": "acute_manifestation",
                    "454": "initial_treatment",
                    "471": "prescription_date",
                    "472": "service_date"
                  } },
                  { "pos": 1, "path": "format_qualifier", "map": { "D8": "date", "RD8": "date_range" } },
                  { "pos": 2, "path": "date" }
                ]
              },
              {
                "id": "HI",
                "repeating_elements": {
                  "all": true,
                  "separator": ":",
                  "patterns": [
                    {
                      "when_qualifier": ["ABK", "ABF", "ABJ"],
                      "output_array": "diagnosis_codes",
                      "fields": [
                        { "component": 0, "name": "qualifier" },
                        { "component": 1, "name": "code" },
                        { "component": 8, "name": "poa" }
                      ]
                    },
                    {
                      "when_qualifier": ["BG"],
                      "output_array": "condition_codes",
                      "fields": [
                        { "component": 0, "name": "qualifier" },
                        { "component": 1, "name": "code" }
                      ]
                    },
                    {
                      "when_qualifier": ["BH"],
                      "output_array": "occurrence_codes",
                      "fields": [
                        { "component": 0, "name": "qualifier" },
                        { "component": 1, "name": "code" },
                        { "component": 2, "name": "date_format" },
                        { "component": 3, "name": "date" }
                      ]
                    },
                    {
                      "when_qualifier": ["BE"],
                      "output_array": "value_codes",
                      "fields": [
                        { "component": 0, "name": "qualifier" },
                        { "component": 1, "name": "code" },
                        { "component": 4, "name": "amount" }
                      ]
                    }
                  ]
                }
              },
              {
                "id": "NM1",
                "qualifier": [0, "82"],
                "optional": true,
                "output_prefix": "rendering_provider",
                "elements": [
                  { "pos": 0, "path": "qualifier", "expect": "82" },
                  { "pos": 1, "path": "type", "map": { "1": "person", "2": "organization" } },
                  { "pos": 2, "path": "last_name" },
                  { "pos": 3, "path": "first_name" },
                  { "pos": 7, "path": "id_qualifier", "map": { "XX": "npi" } },
                  { "pos": 8, "path": "id" }
                ]
              }
            ],
            "nested_loops": [
              {
                "name": "Service Lines",
                "trigger": "LX",
                "output_array": "service_lines",
                "segments": [
                  {
                    "id": "LX",
                    "elements": [
                      { "pos": 0, "path": "line_number" }
                    ]
                  },
                  {
                    "id": "SV1",
                    "elements": [
                      { "pos": 0, "path": "procedure_qualifier", "composite": [0], "map": { "HC": "hcpcs_cpt", "AD": "uniform_billing", "ER": "revenue_code" } },
                      { "pos": 0, "path": "procedure_code", "composite": [1] },
                      { "pos": 1, "path": "charge_amount" },
                      { "pos": 2, "path": "unit_basis", "map": { "UN": "unit", "MJ": "minutes" } },
                      { "pos": 3, "path": "quantity" },
                      { "pos": 6, "path": "diagnosis_pointer" }
                    ]
                  },
                  {
                    "id": "DTP",
                    "optional": true,
                    "elements": [
                      { "pos": 0, "path": "qualifier", "map": { "472": "service_date" } },
                      { "pos": 1, "path": "format_qualifier", "map": { "D8": "date", "RD8": "date_range" } },
                      { "pos": 2, "path": "date" }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      "23": {
        "name": "Patient",
        "output_array": "patients",
        "segments": [
          {
            "id": "HL",
            "elements": [
              { "pos": 0, "path": "hierarchical_id" },
              { "pos": 1, "path": "hierarchical_parent_id" },
              { "pos": 2, "path": "hierarchical_level_code", "expect": "23" }
            ]
          },
          {
            "id": "PAT",
            "optional": true,
            "elements": [
              { "pos": 0, "path": "relationship_code", "map": { "01": "spouse", "19": "child" } }
            ]
          },
          {
            "id": "NM1",
            "qualifier": [0, "QC"],
            "group": ["NM1", "N3", "N4", "DMG"],
            "elements": [
              { "seg": "NM1", "pos": 0, "path": "entity_type_qualifier", "expect": "QC" },
              { "seg": "NM1", "pos": 1, "path": "entity_type", "expect": "1" },
              { "seg": "NM1", "pos": 2, "path": "last_name" },
              { "seg": "NM1", "pos": 3, "path": "first_name" },
              { "seg": "NM1", "pos": 4, "path": "middle_name" },
              { "seg": "N3", "pos": 0, "path": "address1" },
              { "seg": "N3", "pos": 1, "path": "address2" },
              { "seg": "N4", "pos": 0, "path": "city" },
              { "seg": "N4", "pos": 1, "path": "state" },
              { "seg": "N4", "pos": 2, "path": "zip" },
              { "seg": "DMG", "pos": 1, "path": "birth_date" },
              { "seg": "DMG", "pos": 2, "path": "gender", "map": { "F": "female", "M": "male" } }
            ]
          }
        ],
        "child_levels": [],
        "non_hierarchical_loops": [
          {
            "name": "Claims",
            "trigger": "CLM",
            "output_array": "claims",
            "segments": [
              {
                "id": "CLM",
                "elements": [
                  { "pos": 0, "path": "claim_id" },
                  { "pos": 1, "path": "total_charges" },
                  { "pos": 4, "path": "facility_code", "composite": [0] },
                  { "pos": 4, "path": "facility_qualifier", "composite": [1] },
                  { "pos": 4, "path": "frequency_code", "composite": [2] },
                  { "pos": 5, "path": "provider_signature_indicator", "map": { "Y": "yes", "N": "no" } },
                  { "pos": 6, "path": "assignment_plan", "map": { "A": "assigned", "B": "assignment_accepted", "C": "not_assigned" } },
                  { "pos": 7, "path": "benefits_assignment", "map": { "Y": "yes", "N": "no" } },
                  { "pos": 8, "path": "release_info", "map": { "Y": "yes", "N": "no" } },
                  { "pos": 9, "path": "patient_signature_source", "map": { "P": "patient_signature_on_file" } }
                ]
              },
              {
                "id": "DTP",
                "multiple": true,
                "output_array": "dates",
                "elements": [
                  { "pos": 0, "path": "qualifier", "map": {
                    "431": "onset_current_illness",
                    "434": "statement_period",
                    "435": "admission_date",
                    "439": "accident_date",
                    "453": "acute_manifestation",
                    "454": "initial_treatment",
                    "471": "prescription_date",
                    "472": "service_date"
                  } },
                  { "pos": 1, "path": "format_qualifier", "map": { "D8": "date", "RD8": "date_range" } },
                  { "pos": 2, "path": "date" }
                ]
              },
              {
                "id": "HI",
                "repeating_elements": {
                  "all": true,
                  "separator": ":",
                  "patterns": [
                    {
                      "when_qualifier": ["ABK", "ABF", "ABJ"],
                      "output_array": "diagnosis_codes",
                      "fields": [
                        { "component": 0, "name": "qualifier" },
                        { "component": 1, "name": "code" },
                        { "component": 8, "name": "poa" }
                      ]
                    },
                    {
                      "when_qualifier": ["BG"],
                      "output_array": "condition_codes",
                      "fields": [
                        { "component": 0, "name": "qualifier" },
                        { "component": 1, "name": "code" }
                      ]
                    },
                    {
                      "when_qualifier": ["BH"],
                      "output_array": "occurrence_codes",
                      "fields": [
                        { "component": 0, "name": "qualifier" },
                        { "component": 1, "name": "code" },
                        { "component": 2, "name": "date_format" },
                        { "component": 3, "name": "date" }
                      ]
                    },
                    {
                      "when_qualifier": ["BE"],
                      "output_array": "value_codes",
                      "fields": [
                        { "component": 0, "name": "qualifier" },
                        { "component": 1, "name": "code" },
                        { "component": 4, "name": "amount" }
                      ]
                    }
                  ]
                }
              },
              {
                "id": "NM1",
                "qualifier": [0, "82"],
                "optional": true,
                "output_prefix": "rendering_provider",
                "elements": [
                  { "pos": 0, "path": "qualifier", "expect": "82" },
                  { "pos": 1, "path": "type", "map": { "1": "person", "2": "organization" } },
                  { "pos": 2, "path": "last_name" },
                  { "pos": 3, "path": "first_name" },
                  { "pos": 7, "path": "id_qualifier", "map": { "XX": "npi" } },
                  { "pos": 8, "path": "id" }
                ]
              }
            ],
            "nested_loops": [
              {
                "name": "Service Lines",
                "trigger": "LX",
                "output_array": "service_lines",
                "segments": [
                  {
                    "id": "LX",
                    "elements": [
                      { "pos": 0, "path": "line_number" }
                    ]
                  },
                  {
                    "id": "SV1",
                    "elements": [
                      { "pos": 0, "path": "procedure_qualifier", "composite": [0], "map": { "HC": "hcpcs_cpt", "AD": "uniform_billing", "ER": "revenue_code" } },
                      { "pos": 0, "path": "procedure_code", "composite": [1] },
                      { "pos": 1, "path": "charge_amount" },
                      { "pos": 2, "path": "unit_basis", "map": { "UN": "unit", "MJ": "minutes" } },
                      { "pos": 3, "path": "quantity" },
                      { "pos": 6, "path": "diagnosis_pointer" }
                    ]
                  },
                  {
                    "id": "DTP",
                    "optional": true,
                    "elements": [
                      { "pos": 0, "path": "qualifier", "map": { "472": "service_date" } },
                      { "pos": 1, "path": "format_qualifier", "map": { "D8": "date", "RD8": "date_range" } },
                      { "pos": 2, "path": "date" }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    }
  }
}
